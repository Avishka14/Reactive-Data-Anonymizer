<!DOCTYPE html>
<html>
<head>
    <title>Reactive Anonymizer Demo</title>
</head>
<body style="font-family:sans-serif; margin:2rem;">
<h2>Reactive Data Anonymizer</h2>
<input id="name" placeholder="Name"><br><br>
<input id="email" placeholder="Email"><br><br>
<input id="age" placeholder="Age"><br><br>
<button onclick="anonymize()">Anonymize</button>

<h3>Result:</h3>
<pre id="result"></pre>

<script>
    async function anonymize() {
      const input = [
        {
          name: document.getElementById("name").value,
          email: document.getElementById("email").value,
          age: document.getElementById("age").value
        }
      ];


      const ndjson = input.map(obj => JSON.stringify(obj)).join('\n');

      const response = await fetch("/api/anonymize", {
        method: "POST",
        headers: { "Content-Type": "application/x-ndjson" },
        body: ndjson
      });

      const resultText = await response.text(); // NDJSON returns text stream
      document.getElementById("result").textContent = resultText;
    }
</script>

</body>
</html>
